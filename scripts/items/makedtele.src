use os;
use uo;

program walk_on_moongate( mobile, gate )

	set_critical(1);
	if ( GetObjProperty(mobile,"#justgated") )
		EraseObjProperty(mobile,"#justgated");
		return;
	endif

	var x, y, z, r;
    	x := GetObjProperty( gate, "DestX" );
    	y := GetObjProperty( gate, "DestY" );
    	z := GetObjProperty( gate, "DestZ" );
		r := GetObjProperty( gate, "DestRealm" );
	
    	SetObjProperty(mobile,"#justgated",1);
    	MoveObjectToLocation( mobile, x, y, z, r );

endprogram
